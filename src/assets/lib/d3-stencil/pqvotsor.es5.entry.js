D3Stencil.loadBundle("pqvotsor",["exports","./chunk-3fb94679.js","./chunk-1fa210c9.js","./chunk-ef743929.js","./chunk-ccc1d733.js"],function(t,e,a,r,i){var o=window.D3Stencil.h,n=function(){function t(){}return t.prototype.componentWillLoad=function(){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_PIE),this.graphData)},t.prototype.componentDidLoad=function(){this.svg=a.select(this.pieChartEl.getElementsByTagName("svg")[0]),this.height=this.svg.node().getBoundingClientRect().height,this.initSlots(),this.drawChart()},t.prototype.updateGraphData=function(t){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_PIE),t),this.drawChart()},t.prototype.drawChart=function(){var t=this;if(this.hasData()){this.width=this.svg.node().getBoundingClientRect().width,this.radius=Math.min(this.width,this.height)/2,this.reSetRoot();var a=i.arc().innerRadius(0).outerRadius(this.radius);this.pie=this.root.selectAll(".arc").data(i.pie().sort(null).value(function(t){return t})(this.graphDataMerged.data)).enter().append("g").attr("class","arc"),this.pie.append("path").attr("d",a).attr("stroke","#FFF").attr("fill",function(a,r){return e.circularFind(t.graphDataMerged.colors,r)}).on("mousemove",function(e){return t.eventsTooltip({data:e,isToShow:!0})}).on("mouseout",function(){return t.eventsTooltip({isToShow:!1})}),this.createLabels()}},t.prototype.hasData=function(){return this.graphDataMerged.hasData(this.graphDataMerged)},t.prototype.reSetRoot=function(){this.root&&this.root.remove(),this.root=this.svg.append("g").attr("transform","translate("+this.width/2+", "+this.height/2+")")},t.prototype.initSlots=function(){this.tooltipEl=e.initTooltipIfExists(this.pieChartEl),this.legendEl=e.initLegendIfExists(this.pieChartEl,this.eventsLegend.bind(this))},t.prototype.createLabels=function(){var t=this;this.labelArc=i.arc().innerRadius(this.radius-40).outerRadius(this.radius-40),this.pie.append("text").attr("transform",function(e){return"translate("+t.labelArc.centroid(e)+")"}).attr("dy","0.35em").text(function(a,r){return e.formatter(t.graphDataMerged.pieChart.labelFormat,t.graphDataMerged.labels[r],t.graphDataMerged.pieChart.currency)})},t.prototype.eventsTooltip=function(t){var r=t.data;this.tooltipEl&&(t.isToShow?this.tooltipEl.show(e.formatter(this.graphDataMerged.pieChart.dataFormat,r.data,this.graphDataMerged.pieChart.currency)+" <br/>\n        "+e.formatter(this.graphDataMerged.pieChart.labelFormat,this.graphDataMerged.labels[r.index],this.graphDataMerged.pieChart.currency),[a.event.pageX,a.event.pageY]):this.tooltipEl.hide())},t.prototype.eventsLegend=function(t){var e=this.graphDataMerged.labels,a=this.graphDataMerged.data,r=e.filter(function(e){return e!==t.label}),i=a.filter(function(e,a){return a!==t.index});e.length===r.length?(this.graphDataMerged.labels=this.graphData.labels,this.graphDataMerged.data=this.graphData.data,this.graphDataMerged.colors=this.graphData.colors,this.updateGraphData(this.graphDataMerged)):(this.graphDataMerged.labels=r,this.graphDataMerged.data=i,this.graphDataMerged.colors.splice(t.index,1),this.updateGraphData(this.graphDataMerged))},t.prototype.render=function(){return o("div",{class:this.legendEl?"o-layout is--vertical":"o-layout"},o("div",{class:"o-layout--chart"},o("svg",{style:this.graphDataMerged.styles})),o("div",{class:"o-layout--slot"},o("slot",{name:"tooltip"}),o("slot",{name:"legend"})))},Object.defineProperty(t,"is",{get:function(){return"pie-chart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{graphData:{type:"Any",attr:"graph-data"},legendEl:{state:!0},pieChartEl:{elementRef:!0},tooltipEl:{state:!0},updateGraphData:{method:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".o-layout{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout,.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.o-layout--slot{width:100%}.is--vertical .o-layout--slot{width:10%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}pie-chart .arc text{font:.625rem sans-serif;text-anchor:middle;cursor:default}"},enumerable:!0,configurable:!0}),t}();(function(t,e,a,r){var i,o=arguments.length,n=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(o<3?i(n):o>3?i(e,a,n):i(e,a))||n);o>3&&n&&Object.defineProperty(e,a,n)})([r.resize()],n.prototype,"drawChart",null),t.PieChart=n,Object.defineProperty(t,"__esModule",{value:!0})});