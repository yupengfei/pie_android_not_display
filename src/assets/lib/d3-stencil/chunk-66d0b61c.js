var t=Math.PI,n=2*t,i=n-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new e}function r(t){return function(){return t}}e.prototype=o.prototype={constructor:e,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,i,e){this._+="Q"+ +t+","+ +n+","+(this._x1=+i)+","+(this._y1=+e)},bezierCurveTo:function(t,n,i,e,o,r){this._+="C"+ +t+","+ +n+","+ +i+","+ +e+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(n,i,e,o,r){var h=this._x1,s=this._y1,u=(e=+e)-(n=+n),c=(o=+o)-(i=+i),a=h-n,l=s-i,_=a*a+l*l;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=i);else if(_>1e-6)if(Math.abs(l*u-c*a)>1e-6&&r){var f=e-h,y=o-s,x=u*u+c*c,p=f*f+y*y,v=Math.sqrt(x),g=Math.sqrt(_),M=r*Math.tan((t-Math.acos((x+_-p)/(2*v*g)))/2),d=M/g,T=M/v;Math.abs(d-1)>1e-6&&(this._+="L"+(n+d*a)+","+(i+d*l)),this._+="A"+r+","+r+",0,0,"+ +(l*f>a*y)+","+(this._x1=n+T*u)+","+(this._y1=i+T*c)}else this._+="L"+(this._x1=n)+","+(this._y1=i)},arc:function(e,o,r,h,s,u){e=+e,o=+o;var c=(r=+r)*Math.cos(h),a=r*Math.sin(h),l=e+c,_=o+a,f=1^u,y=u?h-s:s-h;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+_:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-_)>1e-6)&&(this._+="L"+l+","+_),r&&(y<0&&(y=y%n+n),y>i?this._+="A"+r+","+r+",0,1,"+f+","+(e-c)+","+(o-a)+"A"+r+","+r+",0,1,"+f+","+(this._x1=l)+","+(this._y1=_):y>1e-6&&(this._+="A"+r+","+r+",0,"+ +(y>=t)+","+f+","+(this._x1=e+r*Math.cos(s))+","+(this._y1=o+r*Math.sin(s))))},rect:function(t,n,i,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +e+"h"+-i+"Z"},toString:function(){return this._}};var h=Math.abs,s=Math.atan2,u=Math.cos,c=Math.max,a=Math.min,l=Math.sin,_=Math.sqrt,f=1e-12,y=Math.PI,x=y/2,p=2*y;function v(t){return t>=1?x:t<=-1?-x:Math.asin(t)}function g(t){return t.innerRadius}function M(t){return t.outerRadius}function d(t){return t.startAngle}function T(t){return t.endAngle}function b(t){return t&&t.padAngle}function A(t,n,i,e,o,r,h){var s=t-i,u=n-e,a=(h?r:-r)/_(s*s+u*u),l=a*u,f=-a*s,y=t+l,x=n+f,p=i+l,v=e+f,g=(y+p)/2,M=(x+v)/2,d=p-y,T=v-x,b=d*d+T*T,A=o-r,m=y*v-p*x,w=(T<0?-1:1)*_(c(0,A*A*b-m*m)),N=(m*T-d*w)/b,P=(-m*d-T*w)/b,E=(m*T+d*w)/b,C=(-m*d+T*w)/b,R=N-g,S=P-M,k=E-g,q=C-M;return R*R+S*S>k*k+q*q&&(N=E,P=C),{cx:N,cy:P,x01:-l,y01:-f,x11:N*(o/A-1),y11:P*(o/A-1)}}function m(){var t=g,n=M,i=r(0),e=null,c=d,m=T,w=b,N=null;function P(){var r,g,M,d=+t.apply(this,arguments),T=+n.apply(this,arguments),b=c.apply(this,arguments)-x,P=m.apply(this,arguments)-x,E=h(P-b),C=P>b;if(N||(N=r=o()),T<d&&(g=T,T=d,d=g),T>f)if(E>p-f)N.moveTo(T*u(b),T*l(b)),N.arc(0,0,T,b,P,!C),d>f&&(N.moveTo(d*u(P),d*l(P)),N.arc(0,0,d,P,b,C));else{var R,S,k=b,q=P,z=b,L=P,I=E,Z=E,j=w.apply(this,arguments)/2,O=j>f&&(e?+e.apply(this,arguments):_(d*d+T*T)),Q=a(h(T-d)/2,+i.apply(this,arguments)),V=Q,B=Q;if(O>f){var D=v(O/d*l(j)),F=v(O/T*l(j));(I-=2*D)>f?(z+=D*=C?1:-1,L-=D):(I=0,z=L=(b+P)/2),(Z-=2*F)>f?(k+=F*=C?1:-1,q-=F):(Z=0,k=q=(b+P)/2)}var G=T*u(k),H=T*l(k),J=d*u(L),K=d*l(L);if(Q>f){var U,W=T*u(q),X=T*l(q),Y=d*u(z),$=d*l(z);if(E<y&&(U=function(t,n,i,e,o,r,h,s){var u=Y-G,c=$-H,a=h-W,l=s-X,_=l*u-a*c;if(!(_*_<f))return[G+(_=(a*(H-X)-l*(G-W))/_)*u,H+_*c]}(0,0,0,0,0,0,J,K))){var tt=G-U[0],nt=H-U[1],it=W-U[0],et=X-U[1],ot=1/l(((M=(tt*it+nt*et)/(_(tt*tt+nt*nt)*_(it*it+et*et)))>1?0:M<-1?y:Math.acos(M))/2),rt=_(U[0]*U[0]+U[1]*U[1]);V=a(Q,(d-rt)/(ot-1)),B=a(Q,(T-rt)/(ot+1))}}Z>f?B>f?(R=A(Y,$,G,H,T,B,C),S=A(W,X,J,K,T,B,C),N.moveTo(R.cx+R.x01,R.cy+R.y01),B<Q?N.arc(R.cx,R.cy,B,s(R.y01,R.x01),s(S.y01,S.x01),!C):(N.arc(R.cx,R.cy,B,s(R.y01,R.x01),s(R.y11,R.x11),!C),N.arc(0,0,T,s(R.cy+R.y11,R.cx+R.x11),s(S.cy+S.y11,S.cx+S.x11),!C),N.arc(S.cx,S.cy,B,s(S.y11,S.x11),s(S.y01,S.x01),!C))):(N.moveTo(G,H),N.arc(0,0,T,k,q,!C)):N.moveTo(G,H),d>f&&I>f?V>f?(R=A(J,K,W,X,d,-V,C),S=A(G,H,Y,$,d,-V,C),N.lineTo(R.cx+R.x01,R.cy+R.y01),V<Q?N.arc(R.cx,R.cy,V,s(R.y01,R.x01),s(S.y01,S.x01),!C):(N.arc(R.cx,R.cy,V,s(R.y01,R.x01),s(R.y11,R.x11),!C),N.arc(0,0,d,s(R.cy+R.y11,R.cx+R.x11),s(S.cy+S.y11,S.cx+S.x11),C),N.arc(S.cx,S.cy,V,s(S.y11,S.x11),s(S.y01,S.x01),!C))):N.arc(0,0,d,L,z,C):N.lineTo(J,K)}else N.moveTo(0,0);if(N.closePath(),r)return N=null,r+""||null}return P.centroid=function(){var i=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+c.apply(this,arguments)+ +m.apply(this,arguments))/2-y/2;return[u(e)*i,l(e)*i]},P.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:r(+n),P):t},P.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),P):n},P.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:r(+t),P):i},P.padRadius=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:r(+t),P):e},P.startAngle=function(t){return arguments.length?(c="function"==typeof t?t:r(+t),P):c},P.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:r(+t),P):m},P.padAngle=function(t){return arguments.length?(w="function"==typeof t?t:r(+t),P):w},P.context=function(t){return arguments.length?(N=null==t?null:t,P):N},P}function w(t){this._context=t}function N(t){return new w(t)}function P(t){return t[0]}function E(t){return t[1]}function C(){var t=P,n=E,i=r(!0),e=null,h=N,s=null;function u(r){var u,c,a,l=r.length,_=!1;for(null==e&&(s=h(a=o())),u=0;u<=l;++u)!(u<l&&i(c=r[u],u,r))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+t(c,u,r),+n(c,u,r));if(a)return s=null,a+""||null}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:r(+n),u):t},u.y=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),u):n},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:r(!!t),u):i},u.curve=function(t){return arguments.length?(h=t,null!=e&&(s=h(e)),u):h},u.context=function(t){return arguments.length?(null==t?e=s=null:s=h(e=t),u):e},u}function R(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function S(t){return t}function k(){var t=S,n=R,i=null,e=r(0),o=r(p),h=r(0);function s(r){var s,u,c,a,l,_=r.length,f=0,y=new Array(_),x=new Array(_),v=+e.apply(this,arguments),g=Math.min(p,Math.max(-p,o.apply(this,arguments)-v)),M=Math.min(Math.abs(g)/_,h.apply(this,arguments)),d=M*(g<0?-1:1);for(s=0;s<_;++s)(l=x[y[s]=s]=+t(r[s],s,r))>0&&(f+=l);for(null!=n?y.sort(function(t,i){return n(x[t],x[i])}):null!=i&&y.sort(function(t,n){return i(r[t],r[n])}),s=0,c=f?(g-_*d)/f:0;s<_;++s,v=a)x[u=y[s]]={data:r[u],index:s,value:l=x[u],startAngle:v,endAngle:a=v+(l>0?l*c:0)+d,padAngle:M};return x}return s.value=function(n){return arguments.length?(t="function"==typeof n?n:r(+n),s):t},s.sortValues=function(t){return arguments.length?(n=t,i=null,s):n},s.sort=function(t){return arguments.length?(i=t,n=null,s):i},s.startAngle=function(t){return arguments.length?(e="function"==typeof t?t:r(+t),s):e},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:r(+t),s):o},s.padAngle=function(t){return arguments.length?(h="function"==typeof t?t:r(+t),s):h},s}function q(t){return t<0?-1:1}function z(t,n,i){var e=t._x1-t._x0,o=n-t._x1,r=(t._y1-t._y0)/(e||o<0&&-0),h=(i-t._y1)/(o||e<0&&-0),s=(r*o+h*e)/(e+o);return(q(r)+q(h))*Math.min(Math.abs(r),Math.abs(h),.5*Math.abs(s))||0}function L(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n}function I(t,n,i){var e=t._x0,o=t._x1,r=t._y1,h=(o-e)/3;t._context.bezierCurveTo(e+h,t._y0+h*n,o-h,r-h*i,o,r)}function Z(t){this._context=t}function j(t){this._context=t}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},Z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:I(this,this._t0,L(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var i=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,I(this,L(this,i=z(this,t,n)),i);break;default:I(this,this._t0,i=z(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i}}},(function(t){this._context=new j(t)}.prototype=Object.create(Z.prototype)).point=function(t,n){Z.prototype.point.call(this,n,t)},j.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,i,e,o,r){this._context.bezierCurveTo(n,t,e,i,r,o)}};export{C as a,m as b,k as c};