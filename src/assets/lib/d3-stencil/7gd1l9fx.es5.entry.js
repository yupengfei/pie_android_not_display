D3Stencil.loadBundle("7gd1l9fx",["exports","./chunk-3fb94679.js","./chunk-1fa210c9.js","./chunk-e7d195e0.js","./chunk-f7062f5a.js","./chunk-ef743929.js","./chunk-ccc1d733.js"],function(t,e,a,r,n,i,o){var s=window.D3Stencil.h,h=function(){function t(){}return t.prototype.lineChartRenderedHandle=function(){this.lineChartAreReady()},t.prototype.componentWillLoad=function(){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_ANNOTATIONS_LINE),this.graphData)},t.prototype.updateGraphData=function(t){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_ANNOTATIONS_LINE),t),this.lineChartEl.updateGraphData(this.graphDataMerged),this.drawChart()},t.prototype.lineChartAreReady=function(){this.lineChartEl=this.lineAnnotationsChartEl.getElementsByTagName("line-chart")[0],this.svg=a.select(this.lineChartEl.getElementsByTagName("svg")[0]),this.height=this.svg.node().getBoundingClientRect().height-this.graphDataMerged.lineChart.margin.top-this.graphDataMerged.lineChart.margin.bottom,this.svg.style("height",this.svg.node().getBoundingClientRect().height+this.graphDataMerged.lineAnnotationsChart.increaseHeight),this.drawChart()},t.prototype.drawChart=function(){var t=this;if(this.hasData()){this.reSetRoot(),this.width=this.svg.node().getBoundingClientRect().width-this.graphDataMerged.lineChart.margin.left-this.graphDataMerged.lineChart.margin.right;var e=this.graphDataMerged.data,a=e.reduce(function(t,e){return t.concat(e)},[]);this.x=r.ordinal().domain(a).range(a.map(function(a,r){return r*(t.width/(e[0].length-1))})),this.repositionXAxis(),this.drawAnnotations()}},t.prototype.hasData=function(){return this.graphDataMerged.hasData(this.graphDataMerged)},t.prototype.reSetRoot=function(){this.root=a.select(this.lineAnnotationsChartEl.getElementsByTagName("line-chart")[0].children[0]),this.annotationsGroup&&this.annotationsGroup.remove()},t.prototype.repositionXAxis=function(){this.root.selectAll(".x text").attr("dy",this.graphDataMerged.lineAnnotationsChart.tickSeparation),this.root.selectAll(".x.axis-label").attr("dy","1em")},t.prototype.drawAnnotations=function(){var t=this,e=this.x.range();this.annotationsGroup=this.root.select("g").append("g").attr("transform","translate(0, "+this.height+")").attr("class","annotations-group"),this.root.select(".annotations-group").selectAll(".annotation").data(this.graphDataMerged.lineAnnotationsChart.annotations).enter().append("g").attr("transform",function(t,a){return"translate("+e[a]+", 0)"}).attr("class","annotation").attr("data",function(t,a){return e[a]}).filter(function(t){return t.length>0}).append("svg:image").attr("y",7).attr("x",-7).attr("width",function(t){return t.length>1?20:17}).attr("height",function(t){return t.length>1?20:17}).attr("xlink:href",function(e){return e.length>1?t.graphDataMerged.lineAnnotationsChart.imagePathSomeAnnotations:t.graphDataMerged.lineAnnotationsChart.imagePathOneAnnotation}).on("mouseover",function(){return t.strokedashAnnotations(!0)}).on("mouseleave",function(){return t.strokedashAnnotations()})},t.prototype.strokedashAnnotations=function(t){void 0===t&&(t=!1);var e=a.select(a.event.target).node().parentNode.attributes.data.nodeValue,r=["style","stroke: #0283B0; stroke-width: 3"],n=["stroke-dasharray","5,5"];t?this.root.select(".grid[text-anchor~=middle]").append("line").attr("class","strokedash").attr("x1",e).attr("y1",0).attr("x2",e).attr("y2",this.height).attr(r[0],r[1]).attr(n[0],n[1]):this.root.select(".strokedash").remove()},t.prototype.render=function(){return s("line-chart",{graphData:this.graphDataMerged})},Object.defineProperty(t,"is",{get:function(){return"line-annotations-chart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{graphData:{type:"Any",attr:"graph-data"},lineAnnotationsChartEl:{elementRef:!0},updateGraphData:{method:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"lineChartRendered",method:"lineChartRenderedHandle"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".o-layout{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout,.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.o-layout--slot{width:100%}.is--vertical .o-layout--slot{width:10%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}line-annotations-chart .annotations-group .annotation{cursor:pointer}"},enumerable:!0,configurable:!0}),t}();!function(t,e,a,r){var n,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(o=(i<3?n(o):i>3?n(e,a,o):n(e,a))||o);i>3&&o&&Object.defineProperty(e,a,o)}([i.resize()],h.prototype,"drawChart",null);var l=function(){function t(){}return t.prototype.componentWillLoad=function(){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_LINE),this.graphData)},t.prototype.componentDidLoad=function(){this.svg=a.select(this.lineChartEl.getElementsByClassName("line-chart")[0]),this.height=this.svg.node().getBoundingClientRect().height-this.graphDataMerged.lineChart.margin.top-this.graphDataMerged.lineChart.margin.bottom,this.tooltipEl=e.initTooltipIfExists(this.lineChartEl),this.legendEl=e.initLegendIfExists(this.lineChartEl,this.eventsLegend.bind(this)),this.drawChart(),this.handleOnRenderized()},t.prototype.updateGraphData=function(t){this.graphDataMerged=e.objectAssignDeep(Object.assign({},e.DEFAULT_GRAPH_DATA_LINE),t),this.drawChart()},t.prototype.drawChart=function(t){var e=this;if(this.reSetRoot(),this.width=this.svg.node().getBoundingClientRect().width-this.graphDataMerged.lineChart.margin.left-this.graphDataMerged.lineChart.margin.right,this.hasData()&&t){this.x=r.ordinal().domain(t.labels).range(t.range);var a=this.graphDataMerged.data,n=a.reduce(function(t,e){return t.concat(e)},[]);this.y=r.linear().domain([0,r.max(n,function(t){return t})]).range([this.height,0]);var i=r.ordinal().domain(n).range(n.map(function(t,r){return r*(e.width/(a[0].length-1))}));this.line=o.line().x(function(t,e){return i(e)}).y(function(t){return e.y(t)}),this.drawAxis(),this.drawAxisLabels(),this.drawGrid(),this.drawLines(),this.drawDots(i)}return{width:this.width,graphData:this.graphDataMerged}},t.prototype.hasData=function(){return this.graphDataMerged.hasData(this.graphDataMerged)},t.prototype.reSetRoot=function(){this.root&&this.root.remove(),this.root=this.svg.append("g").attr("transform","translate("+this.graphDataMerged.lineChart.margin.left+", "+this.graphDataMerged.lineChart.margin.top+")")},t.prototype.drawAxis=function(){var t=this;this.graphDataMerged.lineChart.axis.x.visible&&this.root.append("g").attr("class","x axis").attr("transform","translate(0, "+this.height+")").call(r.axisBottom(this.x).tickFormat(function(a){return e.formatter(t.graphDataMerged.lineChart.axis.x.format,a,t.graphDataMerged.lineChart.axis.x.currency)})),this.graphDataMerged.lineChart.axis.y.visible&&this.root.append("g").attr("class","y axis").call(r.axisLeft(this.y).tickFormat(function(a){return e.formatter(t.graphDataMerged.lineChart.axis.y.format,a,t.graphDataMerged.lineChart.axis.y.currency)}))},t.prototype.drawAxisLabels=function(){""!==this.graphDataMerged.lineChart.axis.x.label&&this.root.append("text").attr("class","x axis-label").attr("transform","translate("+this.width/2+", "+(this.height+2*this.graphDataMerged.lineChart.margin.top)+")").text(this.graphData.lineChart.axis.x.label),""!==this.graphDataMerged.lineChart.axis.y.label&&this.root.append("text").attr("class","y axis-label").attr("transform","rotate(-90)").attr("y",0-this.graphDataMerged.lineChart.margin.left).attr("x",0-this.height/2).attr("dy","1em").text(this.graphData.lineChart.axis.y.label)},t.prototype.drawGrid=function(){this.graphDataMerged.lineChart.axis.x.gridVisible&&this.root.append("g").attr("class","grid").call(r.axisBottom(this.x).tickSize(this.height).tickFormat(function(){return""})),this.graphDataMerged.lineChart.axis.y.gridVisible&&this.root.append("g").attr("class","grid").call(r.axisLeft(this.y).tickSize(-this.width).tickFormat(function(){return""}))},t.prototype.drawLines=function(){var t=this;this.root.append("g").attr("class","lines").selectAll(".line-group").data(this.graphDataMerged.data).enter().append("g").attr("class",function(t,e){return"line-group line-group-"+e}).append("path").attr("class","line").style("stroke",function(a,r){return e.circularFind(t.graphDataMerged.colors,r)}).attr("d",this.line)},t.prototype.drawDots=function(t){var a=this;this.root.selectAll(".line-group").append("g").attr("class","dots-group").style("fill",function(t,r){return e.circularFind(a.graphDataMerged.colors,r)}).selectAll(".dots-group").data(function(t,e){return a.graphDataMerged.data[e]}).enter().append("circle").attr("class","dot").attr("cx",function(e,a){return t(a)}).attr("cy",function(t){return a.y(t)}).attr("r",5).on("mouseover",function(t,e){return a.eventsTooltip({data:t,index:e,isToShow:!0})}).on("mouseout",function(){return a.eventsTooltip({isToShow:!1})})},t.prototype.handleOnRenderized=function(){this.lineChartRendered.emit()},t.prototype.eventsTooltip=function(t){var r=t.index;this.tooltipEl&&(t.isToShow?this.tooltipEl.show(e.formatter(this.graphDataMerged.lineChart.axis.y.format,t.data,this.graphDataMerged.lineChart.axis.y.currency)+" <br/> "+e.formatter(this.graphDataMerged.lineChart.axis.x.format,this.graphDataMerged.labels[r],this.graphDataMerged.lineChart.axis.x.currency),[a.event.pageX,a.event.pageY]):this.tooltipEl.hide())},t.prototype.eventsLegend=function(t){var e=a.select(".line-group-"+t.index);e.classed("line-group__inactive",!e.classed("line-group__inactive"))},t.prototype.render=function(){return s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s("svg",{style:this.graphDataMerged.styles,class:"line-chart"})),s("div",{class:"o-layout--slot"},s("slot",{name:"tooltip"}),s("slot",{name:"legend"})))},Object.defineProperty(t,"is",{get:function(){return"line-chart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{graphData:{type:"Any",attr:"graph-data"},lineChartEl:{elementRef:!0},updateGraphData:{method:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"lineChartRendered",method:"lineChartRendered",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".o-layout{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout,.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.o-layout--slot{width:100%}.is--vertical .o-layout--slot{width:10%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}line-chart .axis text{font:.65rem sans-serif}line-chart .axis-label{text-anchor:middle;font:1rem sans-serif}line-chart .grid line{stroke:#d3d3d3;stroke-opacity:.7;shape-rendering:crispEdges}line-chart .grid path{stroke-width:0}line-chart .line-group{-webkit-transition:opacity .5s linear;transition:opacity .5s linear}line-chart .line-group__inactive{opacity:0}line-chart .line-group .line{fill:none;stroke-width:3}line-chart .line-group .dot{stroke:#fff}"},enumerable:!0,configurable:!0}),t}();(function(t,e,a,r){var n,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(o=(i<3?n(o):i>3?n(e,a,o):n(e,a))||o);i>3&&o&&Object.defineProperty(e,a,o)})([i.resize({axisData:!0})],l.prototype,"drawChart",null),t.LineAnnotationsChart=h,t.LineChart=l,Object.defineProperty(t,"__esModule",{value:!0})});